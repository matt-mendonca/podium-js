var Podium=Podium||{};!function(a){CKEDITOR.disableAutoInline=!0,Podium.slidesEditor=function(){var b="/admin/slides"+window.location.pathname,c="<div class='editor-resource tool-bar'><form action='"+b+"/update-content' method='post' class='slides-update-form'><textarea class='slidesMarkup' name='slidesMarkup'></textarea><input type='submit' value='Save' class='button success save'><a href='"+b+"' class='button secondary right exit'>Exit</a></form></div>",d=function(){e(),a("body").prepend(c),a(".slides-update-form").submit(f)},e=function(){a("section[data-markdown]").removeAttr("data-markdown").attr("data-markdown-disabled-podium",""),a("section pre > code").parent().replaceWith(function(){return"<div class='podium-editor-code-wrapper'>"+this.innerHTML+"</div>"})},f=function(){return h(),a(".reveal section").each(function(){0===a(this).children("section").length&&a(this).removeAttr("contenteditable")}),Reveal.isOverview()&&Reveal.toggleOverview(),Reveal.isPaused()&&Reveal.togglePause(),a(".slides-update-form .slidesMarkup").val(a(".slides").html()),!0},g=function(b){h(),a(b).is("[data-markdown-disabled-podium")||a(b).find(".podium-editor-code-wrapper").length||(a(b).attr("contenteditable","true"),CKEDITOR.inline(b))},h=function(){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0)};return{init:d,addCkEditorInstance:g,removeCkEditorInstances:h}}(),a(document).ready(function(){Podium.slidesEditor.init(),Reveal.addEventListener("ready",function(a){Podium.slidesEditor.addCkEditorInstance(a.currentSlide)}),Reveal.addEventListener("slidechanged",function(a){Podium.slidesEditor.addCkEditorInstance(a.currentSlide)})})}(jQuery);
var Podium=Podium||{};!function(e){CKEDITOR.disableAutoInline=!0,Podium.slidesEditor=function(){var t="/admin/slides"+window.location.pathname,i="<section>Content</section>",n="<section class='stack present'></section>",s=250,a="<div class='editor-resource tool-bar'><form action='"+t+"/update-content' method='post' class='slides-update-form'><textarea class='slidesMarkup' name='slidesMarkup'></textarea><div class='input-icon-button-wrapper'><i class='fi-check input-icon'></i><input type='submit' value='Save' class='button icon-button success save'></div><a href='"+t+"' class='button icon-button secondary right exit'><i class='fi-minus-circle'></i> Cancel</a></form><div class='button alert slides-editor-button remove'>-</div><div class='button slides-editor-button add after'>+</div><div class='button slides-editor-button add below'>+</div></div>",d=function(){o(),e("body").prepend(a),e(".slides-update-form").submit(r),e(".slides-editor-button.add.after").click(u),e(".slides-editor-button.add.below").click(v),e(".slides-editor-button.remove").click(p)},o=function(){e("section[data-markdown]").removeAttr("data-markdown").attr("data-markdown-disabled-podium",""),e("section pre > code").parent().replaceWith(function(){return"<div class='podium-editor-code-wrapper'>"+this.innerHTML+"</div>"})},r=function(){return l(),e(".reveal section").each(function(){0===e(this).children("section").length&&e(this).removeAttr("contenteditable")}),Reveal.isOverview()&&Reveal.toggleOverview(),Reveal.isPaused()&&Reveal.togglePause(),e(".slides-update-form .slidesMarkup").val(e(".slides").html()),!0},c=function(t){l(),e(t).is("[data-markdown-disabled-podium")||e(t).find(".podium-editor-code-wrapper").length||(e(t).attr("contenteditable","true"),CKEDITOR.inline(t))},l=function(){for(var e in CKEDITOR.instances)CKEDITOR.instances[e].destroy(!0)},u=function(){var t=e(".slides .present").not(".stack"),n=t.parent();n.is("section.stack")?n.after(i):t.after(i),Reveal.initialize(),setTimeout(function(){Reveal.right()},s)},v=function(){var t=e(".slides .present").not(".stack"),a=t.parent();a.is("section.stack")||t.wrap(n),t.after(i),Reveal.initialize(),setTimeout(function(){Reveal.down()},s)},p=function(){var t=e(".slides .present").not(".stack"),i=t.parent();t.remove(),i.is("section.stack")&&1===i.children().length&&i.children().unwrap(),Reveal.getPreviousSlide()||i.is("section.stack")?Reveal.prev():Reveal.slide(0,0,0)};return{init:d,addCkEditorInstance:c,removeCkEditorInstances:l}}(),e(document).ready(function(){Podium.slidesEditor.init(),Reveal.addEventListener("ready",function(e){Podium.slidesEditor.addCkEditorInstance(e.currentSlide)}),Reveal.addEventListener("slidechanged",function(e){Podium.slidesEditor.addCkEditorInstance(e.currentSlide)})})}(jQuery);